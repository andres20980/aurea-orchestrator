version: '3.8'

services:
  aurea-orchestrator:
    build: .
    image: aurea-sandbox:latest
    container_name: aurea-sandbox-runner
    ports:
      - "8000:8000"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./src:/app/src:ro
    environment:
      - SANDBOX_IMAGE=aurea-sandbox:latest
      - SANDBOX_CPU_LIMIT=1.0
      - SANDBOX_MEMORY_LIMIT=512m
      - SANDBOX_DEFAULT_TIMEOUT=30
      - HOST=0.0.0.0
      - PORT=8000
    command: python /app/src/main.py
    restart: unless-stopped
    networks:
      - aurea-network

networks:
  aurea-network:
    driver: bridge
